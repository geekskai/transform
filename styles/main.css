/* === Light Theme Brand #16F2B3 (Design Spec) === */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   CSS Variables - Required for theme consistency
   ============================================================================ */
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 162.8 89.6% 51.8%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 162.8 89.6% 51.8%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 162.8 89.6% 51.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 162.8 89.6% 51.8%;
  }

  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground antialiased;
  }
}

/* Brand color CSS variables (for components that can't use Tailwind) */
:root {
  --brand: #16f2b3;
  --brand-50: #e8fdf7;
  --brand-100: #b8fae8;
  --brand-200: #7af5d3;
  --brand-300: #3cefbe;
  --brand-400: #1ae8b0;
  --brand-500: #16f2b3;
  --brand-600: #12c992;
  --brand-700: #0e9f72;
  --brand-800: #0a7552;
  --brand-900: #064a33;
  --page-bg: #f8fafa;
  --surface: #ffffff;
  --text-primary: #111827;
  --text-secondary: #4b5563;
  --text-muted: #6b7280;
  --border: #e5e7eb;
  --border-brand: #7af5d3;
}

/* ============================================================================
   Third-party Library Overrides (Cannot use Tailwind)
   ============================================================================ */

/* NProgress loading bar */
#nprogress {
  @apply pointer-events-none;
}
#nprogress .bar {
  @apply fixed left-0 top-0 z-[1031] h-[3px] w-full;
  background: var(--brand);
}
#nprogress .peg {
  @apply absolute right-0 block h-full w-[100px] opacity-100;
  box-shadow: 0 0 10px var(--brand), 0 0 5px var(--brand-200);
  transform: rotate(3deg) translate(0px, -4px);
}
.nprogress-custom-parent #nprogress .bar {
  @apply absolute;
}

/* Monaco Editor */
.monaco-editor {
  @apply pt-4;
}
.react-monaco-editor-container {
  @apply flex flex-1;
}

/* Headway badge */
#HW_badge_cont {
  @apply absolute right-0 top-0;
}

/* Carbon Ads */
.cf-wrapper {
  @apply rounded-none border-b border-gray-300 p-1 text-xs leading-tight;
}
.cf-img {
  @apply h-[70px] max-w-[90px];
}
.cf-img-wrapper {
  @apply mr-2;
}
.cf-powered-by {
  @apply text-right;
}

/* Evergreen UI Overrides */
[class*="ub-bg-clr_"][class*="ub-bg_"][class*="primary"],
button[class*="intent-default"]:not([class*="intent-danger"]),
.editor-btn-primary {
  background: linear-gradient(
    to right,
    var(--brand-500),
    var(--brand-400)
  ) !important;
  @apply border-none text-gray-900 shadow-md shadow-brand-500/20 transition-all duration-300;
}
[class*="ub-bg-clr_"][class*="ub-bg_"][class*="primary"]:hover,
button[class*="intent-default"]:not([class*="intent-danger"]):hover,
.editor-btn-primary:hover {
  @apply -translate-y-px shadow-lg shadow-brand-500/25;
}

[role="dialog"] {
  @apply rounded-[20px] shadow-2xl;
}
[role="dialog"] header {
  background: linear-gradient(
    to right,
    var(--brand-50),
    var(--surface)
  ) !important;
  @apply border-b border-gray-200;
}

[data-evergreen-tooltip] {
  @apply rounded-xl shadow-lg;
}
[data-evergreen-popover] {
  @apply rounded-2xl border border-gray-200 shadow-xl;
}

[class*="appearance-primary"] {
  background: linear-gradient(
    to right,
    var(--brand-500),
    var(--brand-400)
  ) !important;
  @apply rounded-[10px] border-none font-semibold text-gray-900 shadow-md shadow-brand-500/20;
}
[class*="appearance-primary"]:hover {
  @apply shadow-lg shadow-brand-500/30;
}

/* ============================================================================
   Layout Components (App structure)
   ============================================================================ */

/* App root layout */
.app-root {
  @apply flex min-h-screen flex-col bg-gray-50;
  width: 100vw;
  background: var(--brand-50);
}
.app-header {
  @apply sticky top-0 z-[100] flex shrink-0 flex-row items-center border-b border-brand-200 shadow-sm shadow-brand-500/5;
  min-height: 56px;
}
.app-main {
  @apply flex flex-1 flex-col;
}
.app-content {
  @apply flex min-w-0 flex-1 flex-col;
}

/* ============================================================================
   Mega Menu (Complex multi-column layout)
   ============================================================================ */
.mega-menu-grid {
  display: block;
  column-width: 200px;
  column-gap: 32px;
  @apply w-full;
}
.mega-menu-column {
  @apply mb-8 w-full;
}
.mega-menu-category-title {
  @apply m-0 border-b border-gray-200 pb-2 text-sm font-bold uppercase tracking-wider text-brand-600;
  break-after: avoid;
}
.mega-menu-list {
  @apply m-0 flex list-none flex-col gap-2 p-0;
}

/* ============================================================================
   Utility Classes
   ============================================================================ */

/* Screen reader only */
.sr-only {
  @apply absolute h-px w-px overflow-hidden whitespace-nowrap border-0 p-0;
  margin: -1px;
  clip: rect(0, 0, 0, 0);
}

/* Dark/Light mode filters */
.dark {
  filter: invert(1);
}
.light {
  filter: none;
}

/* Focus states */
*:focus-visible {
  @apply outline-2 outline-offset-2 outline-brand-400;
}
input:focus,
textarea:focus,
select:focus {
  @apply border-brand-400 ring-4 ring-brand-400/20;
}

/* ============================================================================
   Sidebar Navigation (Navigator.tsx)
   ============================================================================ */
.app-search-wrap {
  @apply px-4 pb-3;
}
.app-search-wrap input,
.app-search-wrap [data-evergreen-layer] input {
  @apply rounded-xl border border-brand-200 bg-brand-50 px-3 py-2.5 pl-9 text-sm text-gray-900 transition-all duration-300;
}
.app-search-wrap input::placeholder {
  @apply text-gray-500;
}
.app-search-wrap input:focus {
  @apply border-brand-400 outline-none ring-4 ring-brand-400/20;
}

.app-nav-category {
  @apply mt-2 px-5 pb-1.5 pt-3 text-[11px] font-semibold uppercase tracking-wider text-gray-500 first:mt-0;
}
.app-nav-item {
  @apply block border-l-[3px] border-transparent px-5 py-2.5 text-[13px] text-gray-600 no-underline transition-all duration-300;
}
.app-nav-item:hover {
  @apply bg-brand-50 text-gray-900;
}
.app-nav-item--active {
  @apply border-l-brand-500 bg-brand-50 font-semibold text-brand-800;
}

/* ============================================================================
   Mega Menu Footer (HeaderNav.tsx)
   ============================================================================ */
.mega-menu-footer-content strong {
  @apply mb-1 block text-[15px] text-brand-900;
}
.mega-menu-footer-content p {
  @apply m-0 text-[13px] text-gray-500;
}
